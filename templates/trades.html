{% extends "base.html" %}
{% block content %}

<h3 class="row d-flex justify-content-center center-text" id="page-title">All Current Trades</h3>

<div class="row">
    <div class="col-lg-9 mx-auto">
        <!-- Accordion -->
        <div id="accordionExample" class="accordion shadow">
            {% for trade in trades %}
            <!-- Accordion item 1 -->
            <div class="card">
                <div id="headingOne" class="card-header bg-white shadow-sm border-0">
                    <h2 class="mb-0">
                        <button type="button" data-toggle="collapse" data-target="#collapseOne-{{loop.index}}" aria-expanded="true"
                            aria-controls="collapseOne"
                            class="btn btn-link text-dark font-weight-bold text-uppercase">Game : {{ trade.game_name }} <i class="fas fa-caret-down"></i></button>
                        {% if trade.is_negotiable == "on" %}
                        <i class="fas fa-exclamation-circle" data-toggle="tooltip" data-placement="right"
                            title="Trade is negotiable by seller!"></i>
                        {% endif %}
                    </h2>

                </div>
                <div id="collapseOne-{{loop.index}}" aria-labelledby="headingOne" data-parent="#accordionExample"
                    class="collapse">
                    <div class="card-body p-5">
                        <strong>Tradeable on: {{ trade.console_name }}</strong>
                        <p>{{ trade.trade_desc }}</p>
                        <strong>Contact Seller</strong>
                        <p>{{ trade.gamer_tag }}</p>
                        <p><em>Listed by: {{ trade.created_by }}</em></p>
                        <div id="#btn-row">
                            {% if session.user|lower == trade.created_by|lower %}
                                <a href=""><button type="button" class="btn btn-success text-center">Item Sold</button></a>
                                <a href="{{ url_for('edit_trade', trade_id=trade._id) }}"><button type="button" class="btn btn-secondary text-center">Edit Trade <i class="fas fa-wrench"></i></button></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}